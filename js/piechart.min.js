!function(a){function b(b){$clickRows=a("."+b.toggleBtnClass),a("."+b.toggleBtnClass).on("click",function(){$this=a(this),$this.hasClass(b.toggleOpenClass)?$this.removeClass(b.toggleOpenClass).next().removeClass(b.toggleOpenClass):($this.addClass(b.toggleOpenClass).next().addClass(b.toggleOpenClass),g($clickRows.index($this)))})}function d(b,c,d,e){for($settings=d,$parent=b,$opt=c,$data=e,$values=new Array,$piechartset_title="",$piechartset_val=0,$piecharset_cat="",$parent.attr($opt.parentAttr),$catwrapper=a("<div />").attr($opt.catWrapperAttr).css($opt.catWrapperCSS),$settings.categoryToggledRandom&&($randomToggled=f(1,$data.length)-1),i=0;i<$data.length;i++)for(v=0;v<$data[i].length;v++)a.each($data[i][v],function(a,b){"val"===a&&$values.push(b),"label"===a&&($piechartset_title=b),"cat"===a&&($piecharset_cat=b)}),0===v&&($catwrapper.appendTo($parent),$catrowtitle=a("<div />").attr($opt.catRowTitleAttr).addClass("cat-index-"+i).css($opt.catRowTitleCSS).appendTo($catwrapper),$catrowtitlecol=a("<div />").attr($opt.catRowTitleColAttr).appendTo($catrowtitle),$catrowbody=a("<div />").attr($opt.catRowContentAttr).addClass("cat-index-"+i).css($opt.catRowContentCSS).appendTo($catwrapper),$settings.allCategoriesToggled?($catrowtitle.addClass($settings.toggleOpenClass),$catrowbody.addClass($settings.toggleOpenClass)):$settings.categoryToggledRandom?i===$randomToggled&&($catrowtitle.addClass($settings.toggleOpenClass),$catrowbody.addClass($settings.toggleOpenClass)):($categoryToggled=$settings.categoryToggled,i===$categoryToggled-1&&$categoryToggled>0&&$categoryToggled<=$data.length&&($catrowtitle.addClass($settings.toggleOpenClass),$catrowbody.addClass($settings.toggleOpenClass))),$cattitle=a("<span>"+$piecharset_cat+"</span>").attr($opt.catRowBtnAttr).appendTo($catrowtitlecol)),$wrapper=a("<div />").attr($opt.wrapperAttr).css($opt.wrapperCSS).appendTo($catrowbody),$elementWrapper=a("<div />").attr($opt.elementWrapperAttr).css($opt.elementWrapperCSS).appendTo($wrapper),$elementInnerWrapper=a("<div />").attr($opt.elementInnerWapperAttr).css($opt.elementInnerWrapperCSS).appendTo($elementWrapper),$piechartCanvas=a('<canvas width="'+$settings.canvasWidth+'" height="'+$settings.canvasHeight+'">').attr($opt.elementCanvasAttr).attr("id","pieChartCanvas_"+$piecharset_cat+"_"+v).css($opt.elementCanvasCSS).appendTo($elementInnerWrapper),$title=a("<h5>"+$piechartset_title+"</h5>").attr($opt.elementTitleAttr).css($opt.elementTitleCSS).prependTo($elementInnerWrapper);$settings.allCategoriesToggled?h():g($settings.categoryToggledRandom?$randomToggled:$settings.categoryToggled-1)}function e(b){for($values=new Array,v=0;v<$data[b].length;v++)a.each($data[b][v],function(a,b){"val"===a&&$values.push(b)});return $values}function f(a,b){return a+Math.floor(Math.random()*(b-a+1))}function g(b){$canvasArray=a(".piechart-category-content-row.cat-index-"+b).find("canvas"),l(e(b),$canvasArray,$settings)}function h(){$canvasArray=a("canvas"),l($values,$canvasArray,$settings)}function l(b,c,d){$settings=d,$values=b,$radius=$settings.pieStyle.radius,$pct=$settings.pieAnimation.pct,$fps=80,$tfilled=0,$drawSteps=2,$duration=1e3,$rate=10,$interval=window.setInterval(function(){c.each(function(b,c){$endingPct=10*$values[b],$canvas=document.getElementById(a(this).attr("id")),$context=$canvas.getContext("2d"),$centerX=$canvas.width/2,$centerY=$canvas.height/2,$pct<=$endingPct&&m($pct,$context,$centerX,$centerY,$radius)}),$pct+=$drawSteps,$tfilled+=$rate,$tfilled>=$duration&&window.clearInterval($interval)},$rate)}function m(a,b,c,d,e){$context=b,$pct=a,$centerX=c,$centerY=d,$context.clearRect(0,0,2*$centerX,2*$centerY),$radius=e,$endRadians=-Math.PI/2+2*Math.PI*$pct/100,$context.beginPath(),$context.arc($centerX,$centerY,$radius,0,2*Math.PI),$context.fillStyle=$settings.pieStyle.fillStyle,$context.fill(),$context.closePath(),$context.beginPath(),$context.arc($centerX,$centerY,$radius,-Math.PI/2,$endRadians),$context.lineTo($centerX,$centerY),$context.fillStyle=$settings.pieStyle.overlayStyle,$context.fill(),$context.font="lighter 18px Roboto, Arial, sans-serif",$context.fillStyle="#000000",$context.fillText($pct+"%",$centerX-20,2*$centerY),$context.closePath()}a.fn.piechart=function(c){$defaults={allCategoriesToggled:!1,categoryToggled:4,categoryToggledRandom:!1,containerWidth:"100%",canvasHeight:"280px",canvasWidth:"280px",toggleBtnClass:"piechart-category-title-row",toggleContainerClass:"piechart-category-content-row",toggleOpenClass:"toggle-open",pieStyle:{fillStyle:"#00B0AF",overlayStyle:"#CA0097",stroke:!1,lineWidth:0,strokeStyle:"#000000",radius:100},pieAnimation:{nextTime:0,pct:0}};var e=a.extend({},$defaults,c),f=e.data;d(this,{parentAttr:{class:"piechart-container container"},wrapperAttr:{class:"piechart-wrapper col-xs-12 col-sm-6 col-md-4"},wrapperCSS:{textAlign:"center"},catWrapperAttr:{class:"piechart-catagory-wrapper"},catWrapperCSS:{},catRowTitleAttr:{class:e.toggleBtnClass+" row"},catRowTitleCSS:{},catRowTitleColAttr:{class:"piechart-category-title-col col-xs-12"},catRowTitleColCSS:{},catRowContentAttr:{class:e.toggleContainerClass+" row"},catRowContentCSS:{},catRowBtnAttr:{class:"piechart-category-akkordeon-headline"},catRowBtnCSS:{},elementWrapperAttr:{class:"piechart-element-wrapper"},elementWrapperCSS:{width:e.containerWidth,display:"inline-block"},elementInnerWapperAttr:{class:"piechart-element-inner-wrapper"},elementInnerWrapperCSS:{overflow:"hidden",position:"relative",zIndex:"990",paddingBottom:"100%"},elementCanvasAttr:{class:"piechart-canvas"},elementCanvasCSS:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",margin:"auto auto",zIndex:"999"},elementTitleAttr:{class:"piechart-element-title"},elementTitleCSS:{position:"absolute",top:"10px",left:"0",width:"100%",textAlign:"center",fontFamily:"Roboto, Arial, sans-serif",fontSize:"20px",fontWeight:"300",padding:"0",margin:"0",zIndex:"1000"}},e,f),b(e)}}(jQuery);